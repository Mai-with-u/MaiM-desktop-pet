# ===================================================================
# 麦麦桌面宠物配置文件模板
# ===================================================================
# 
# 使用说明：
# 1. 复制此文件为 config.toml
# 2. 根据你的需求修改配置项
# 3. 保存并运行程序
#
# 注意：所有配置项都有默认值，可以只修改必要的部分
# ===================================================================

# ----------------------------------------------------------------------
# 基础配置
# ----------------------------------------------------------------------

# 桌宠昵称
Nickname = "麦麦"

# 用户昵称（可选）
userNickname = ""

# 平台标识（已废弃，请使用 model_config.toml 中的协议配置）
# 如果启用 allow_multiple_source_conversion，会自动添加 UUID
platform = "desktop-pet"

# ⚠️ 注意：WebSocket 服务器地址已迁移到 model_config.toml
# 请在 model_config.toml 的 [[protocols]] 配置中设置 url 参数

# 是否隐藏控制台窗口
# true: 启动时隐藏终端窗口
# false: 启动时显示终端窗口
hide_console = false

# 截图快捷键
# 支持的格式：Ctrl+Shift+A, Alt+F4, F5 等
# 留空则不启用快捷键
Screenshot_shortcuts = "Ctrl+Shift+A"

# 是否允许多源转换
# true: 允许多个桌宠实例同时连接
# false: 单实例模式
allow_multiple_source_conversion = false


# ----------------------------------------------------------------------
# 界面配置
# ----------------------------------------------------------------------

[interface]
# 界面缩放倍率
# 范围：0.5 ~ 3.0
scale_factor = 1.0


# ----------------------------------------------------------------------
# 渲染配置
# ----------------------------------------------------------------------

[render]
# 渲染模式
# "static": 静态图片模式（使用 img/small_maimai.png）
# "live2d": Live2D 动画模式
mode = "live2d"

# 是否允许运行时切换渲染模式
allow_switch = true


# ----------------------------------------------------------------------
# Live2D 配置
# ----------------------------------------------------------------------

[live2d]
# 是否启用 Live2D
# 如果为 false，则使用静态图片模式
enabled = true

# Live2D 模型文件路径
# 指向 .model3.json 文件的路径
model_path = "data/live2d/hiyori_pro_zh/runtime/hiyori_pro_t11.model3.json"

# 模型名称
model_name = "hiyori_pro_t11"

# 是否启用物理模拟
# 物理模拟可以让模型动作更自然，但会增加 CPU 占用
physics_enabled = true

# 渲染质量
# "low": 低质量（适合低性能设备）
# "medium": 中等质量（平衡性能和效果）
# "high": 高质量（最佳效果，需要较高性能）
render_quality = "high"

# 是否启用 GPU 加速
# 需要显卡支持 OpenGL
gpu_acceleration = true

# 自定义缩放比例
# 范围：0.5 ~ 3.0
# 留空或 0 表示自动根据窗口大小计算（默认行为）
# 示例：1.5 表示放大 1.5 倍
custom_scale = 0.0

# 自定义水平偏移
# 范围：-1.0 ~ 1.0
# 负值向左偏移，正值向右偏移
# 留空或 0 表示使用默认值
# 示例：0.1 表示向右偏移 10%
custom_offset_x = 0.0

# 自定义垂直偏移
# 范围：-1.0 ~ 1.0
# 负值向上偏移，正值向下偏移
# 留空或 0 表示使用默认值
# 示例：-0.2 表示向上偏移 20%
custom_offset_y = 0.0


# ----------------------------------------------------------------------
# 动画配置
# ----------------------------------------------------------------------

[animation]
# 默认动画状态
# 常见值：idle（空闲）, happy（开心）, sad（难过）, talking（说话）
default_state = "idle"

# 默认表情
# 常见值：normal（正常）, happy（开心）, sad（难过）, angry（生气）
default_expression = "normal"

# 动画帧率
# 范围：30 ~ 60
fps = 60

# 是否启用呼吸效果
# 让模型在空闲时有轻微的呼吸动作
breathing_enabled = true


# ----------------------------------------------------------------------
# 动画调度器配置（Live2D 自动随机动画）
# ----------------------------------------------------------------------

[animation_scheduler]
# 是否启用动画调度器
# true: 启用自动随机动画切换（待机 30-90 秒后随机播放其他动作）
# false: 禁用动画调度器，使用手动控制
enabled = true

# 待机动作最小间隔（秒）
# 播放待机动作后，至少等待这么多秒才切换到随机动作
idle_interval_min = 30.0

# 待机动作最大间隔（秒）
# 播放待机动作后，最多等待这么多秒就切换到随机动作
idle_interval_max = 90.0

# 随机动作持续时间（秒）
# 播放随机动作后，持续这么多秒后返回待机动作
random_motion_duration = 5.0

# 动作组权重（可选）
# 格式：组名 = 权重值
# 权重值越大，该组动作被选中的概率越高
# 示例：
#   [animation_scheduler.group_weights]
#   Tap = 2.0        # 点击动作权重 2.0
#   Flick = 1.5      # 滑动动作权重 1.5
#   Idle = 1.0       # 待机动作权重 1.0
# 留空则所有动作组权重相同
# 
# [animation_scheduler.group_weights]
# Tap = 2.0
# Flick = 1.5
# Idle = 1.0

# 动作组白名单（可选）
# 如果设置，只使用这些组中的动作
# 留空则使用所有动作组（排除待机动作）
# 示例：
#   whitelist = ["Tap", "Flick"]
whitelist = []

# 动作组黑名单（可选）
# 如果设置，排除这些组中的动作
# 留空则不排除任何动作组
# 示例：
#   blacklist = ["Special", "Rare"]
blacklist = []


# ----------------------------------------------------------------------
# 性能配置
# ----------------------------------------------------------------------

[performance]
# 最大帧率限制
# 范围：30 ~ 60
max_fps = 60

# 是否启用垂直同步
# 可以防止画面撕裂，但可能导致输入延迟
vsync = true

# 纹理缓存大小（单位：MB）
# 较大的缓存可以减少加载时间，但会占用更多内存
texture_cache_size = 256


# ----------------------------------------------------------------------
# 通信协议配置
# ----------------------------------------------------------------------

# ⚠️ 注意：此协议配置已废弃
# 请使用 model_config.toml 配置文件管理所有协议和模型配置
# 
# model_config.toml 提供更强大的功能：
# - 集中管理多个 API 提供商（Maim、OpenAI、DeepSeek 等）
# - 灵活的模型配置和任务映射
# - 更好的可扩展性和维护性
#
# 如果你在 model_config.toml 中配置了协议，此处的配置将被忽略
# 
# 迁移步骤：
# 1. 打开 model_config.toml 文件
# 2. 在 [[api_providers]] 部分添加你的协议配置
# 3. 在 [[models]] 部分定义模型
# 4. 在 [model_task_config] 部分配置任务使用的模型
# 
# 示例（参考 model_config.toml.template）：
# [[api_providers]]
# name = "maim_server"
# type = "maim"
# enabled = true
# url = "ws://127.0.0.1:8000/ws"
# platform = "desktop-pet"

# --------------------------------------------------
# 旧配置（已废弃，保留用于向后兼容）
# --------------------------------------------------
# [[protocols]]
# type = "maim"
# url = "ws://127.0.0.1:8000/ws"
# platform = "desktop-pet"

# --------------------------------------------------
# OpenAI 协议配置示例
# --------------------------------------------------
# 如果需要使用 OpenAI 协议，取消下面的注释并配置
#
# [[protocols]]
# type = "openai"
#
# # API 密钥（必填）
# api_key = "sk-xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx"
#
# # API 基础地址（可选，默认官方地址）
# base_url = "https://api.openai.com/v1"
#
# # 模型名称（可选，默认 gpt-3.5-turbo）
# model = "gpt-3.5-turbo"
#
# # 系统提示词（可选）
# system_prompt = "你是一个友好的桌面宠物助手，名字叫 MaMai。请用活泼、可爱的语气回复。"
# --------------------------------------------------

# --------------------------------------------------
# 自定义协议
# --------------------------------------------------
# 你可以通过代码注册自定义协议，然后在此配置
# 参考文档：src/core/protocols/README.md
# --------------------------------------------------

# ----------------------------------------------------------------------
# 数据库配置
# ----------------------------------------------------------------------

[database]
# 数据库类型
# 目前支持：sqlite
type = "sqlite"

# 数据库文件路径
path = "data/chat.db"


# ----------------------------------------------------------------------
# 状态配置
# ----------------------------------------------------------------------

[state]
# 窗口是否锁定
# 锁定后无法拖动和交互
window_locked = false

# 窗口是否可见
window_visible = true

# 终端是否可见
console_visible = true


# ----------------------------------------------------------------------
# 注意事项
# ----------------------------------------------------------------------
# 
# 1. Live2D 模型文件要求：
#     - 必须包含 .model3.json 文件
#     - 相关的 .moc3、纹理、动作文件必须在同一目录下
#     - 推荐使用 Cubism Editor 4.0 或更高版本导出的模型
#
# 2. 性能优化建议：
#     - 低性能设备：render_quality = "low", physics_enabled = false, max_fps = 30
#     - 中等性能设备：render_quality = "medium", physics_enabled = true, max_fps = 60
#     - 高性能设备：render_quality = "high", physics_enabled = true, max_fps = 60
#
# 3. 多实例模式：
#     - 启用 allow_multiple_source_conversion 后，会自动为每个实例生成唯一的 platform ID
#     - 适用于需要同时运行多个桌宠的场景
#
# 4. 截图快捷键：
#     - 快捷键格式必须符合 Qt QKeySequence 规范
#     - 常用示例：Ctrl+Shift+A, Alt+F4, F5, Ctrl+S
#
# 5. 调试：
#     - 设置 hide_console = false 可以查看程序运行日志
#     - 日志文件保存在 logs/pet.log
#
# 6. 通信协议配置：
#     - Maim 协议：适用于连接本地或远程的 Maim 后端服务
#     - OpenAI 协议：适用于直接使用 OpenAI API 进行对话
#     - 可以同时配置多个协议，启动时自动使用第一个
#     - 可以在运行时动态切换协议
#     - 支持自定义协议扩展
#
# ----------------------------------------------------------------------
